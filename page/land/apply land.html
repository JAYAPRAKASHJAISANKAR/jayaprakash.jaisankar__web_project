<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    .tot{
      display: flex;
        justify-content: center;
        align-items: center;

    }
     .whole {
     
        /* padding: 100px; */
       width: 200px;
        background-color: rgb(6, 203, 243);
        padding: 60px 120px 60px 120px;
       box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
         border-radius: 10px;
      }
      .change {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px;
      }
      
      #sub{
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #submit{
        width: 100px;
        height: 30px;
        border: none;
        border-radius: 10px;
        background-color: rgb(48, 160, 240);
      }
  </style>
  <body>
    <div class="tot">
    <div class="whole">
    <form id="form" action="./list.html">
    <div class="change">
      <label>Name</label>&emsp;
      <input id="name" type="text" />
    </div>

    <div class="change">
      <label>email</label>&emsp;
      <input id="email" type="text" />
    </div>


    <div class="change">
      <label>Servour.no</label>&emsp;
      <input id="num" type="number" />
    </div>

    <div class="change">
      <label>village</label>&emsp;
      <input id="vname" type="text" />
    </div>
    <div class="change">
      <label>village.no</label>&emsp;
      <input id="vnum" type="number" />
    </div>

    <div class="change">
      <label>taluk</label>&emsp;
      <input id="tname" type="text" />
    </div class="change">
    <div class="sub">
      <button onclick="edit" id="edit" class="btn">submit</button>
    <!-- <button onclick="submit" id="submit" class="btn">submit</button> -->
    </div>
   
    </form>
    </div>
    </div>
    <script>
// let mail = JSON.parse(window.localStorage.getItem("userinfo"));
//       let data = JSON.parse(window.localStorage.getItem("user"));
//       console.log(data);

//       let get = data.find(function (obj) {
//         let checkmail = obj["email"];
//         if (mail === checkmail) {
//           return true;
//         }
//       });
//       console.log(get);


//       let index = data.indexOf(get);
//         console.log(index);



     
let form = document.getElementById("form");


let form_details = JSON.parse(localStorage.getItem("list"))
console.log(form_details)

// let dat= JSON.parse(localStorage.getItem("data"))
// let rid = JSON.parse(localStorage.getItem("rid"));


// let ject = form_details.find(function (obj) {
//         let checkid = obj["uuid"];
//         if (rid == checkid) {
//           return true;
//         }
       
//       });
// console.log(ject)

// let index =form_details.indexOf(ject)


// function edit(){
//   form_details[index].removeAttribute("disabled")
// }
// const editpage = document.querySelectorAll(".input");
//       console.log(editpage);
//       function edit() {
//         for (i = 0; i < editpage.length; i++) {
//           editpage[i].removeAttribute("disabled");
//         }
//       }


      // let tname = ject[""]
      form.addEventListener("submit", function (event) {
        event.preventDefault();
        let name =document.getElementById("name").value;
        let email =document.getElementById("email").value;
        let num =document.getElementById("num").value;
        let vname =document.getElementById("vname").value;
        let vnum =document.getElementById("vnum").value;
        let tname =document.getElementById("tname").value;
    


     
      // console.log(get);
        let obj ={
          name,
          email,
          num,
          vname,
          vnum,
          tname
         };
         let uuid = crypto.randomUUID();
        obj["uuid"] = uuid;
        console.log(uuid);
        console.log(obj);


    
        let arr = [ ];
        arr.push(obj);

      //   let mail = JSON.parse(window.localStorage.getItem("userinfo"));
      // let data = JSON.parse(window.localStorage.getItem("user"));
      // console.log(data);


      
      // let checkmail = get["email"];
      //   console.log(checkmail)

      //   console.log(dat);
      // let ject= dat.find(function (obj) {
      //   let mail = obj["email"];
      //   if (mail === checkmail) {
      //     return true;
      //   }
      // });
      // console.log(ject);


      // let number = ject["num"];
      //   console.log(number)



        // let arr=[];
        //      let check =[];    

        //  for(let i=0;i<  form_details.length;i++){
        //   for(let j=0;j<form_details[i].number.length;j++){
        //     if(number ==   form_details[i].number[i])
              
        //   check.push(ject);
        //   arr.push(check)

        //   window.localStorage.setItem("data", JSON.stringify(arr));
        //     console.log(window.localStorage.getItem("data"));
        //   }
         
        //  }
        // if(
        //  form_details[0].number.find( (obj) => obj == number )){
        //   let check =[];        
        //   check.push(ject);
        //   arr.push(check)

          // window.localStorage.setItem("data", JSON.stringify(arr));
          //   console.log(window.localStorage.getItem("data"));


        //  let validation = JSON.parse(window.localStorage.getItem("data"));
         
       
      //   for (let i = 0; i < form_details.length; i++) {
      //     let is = false;
      //     if (num === form_details[i]["num"]) {
      //       //alert("Email is already in use");
      //       is = true;
      //       break;
      //     }
        
      // }
      //   if (is == true) {
      //     alert("already  land number is exist");
      //   } else {

          if (window.localStorage.getItem("data") === null) {
            window.localStorage.setItem("data", JSON.stringify(arr));
            console.log(window.localStorage.getItem("data"));
             window.location.href = "./list.html"
          } else {
            let local = window.localStorage.getItem("data");
            let json = JSON.parse(local);
            json.push(obj);
            window.localStorage.setItem("data", JSON.stringify(json));
          }
           window.location.href = "./list.html";

          
        });
      
        //  }
        // let num = obj["num"];
        // if (number === num) {
        //   return true;
        // }
      
      // console.log(arr);


      // const length = form_details[0].number.length;
      // console.log(length)


      // for(let i=0;i<length;i++){
      //   if(vnum !==form_details[0].number[i]){
      //     alert("change")
      //   }
      //   else{
        //   let arr=[];
        //  arr.push(obj);
      //   }
      // }

       
        



    //      let validation = JSON.parse(window.localStorage.getItem("data"));
    //      const length = validation[0].number.length;
    //   let is = false;
    //  for (let i = 0; i <length; i++) {
    //    if (email === validation[0].number[i]) {
    //     alert("Email is already in use");
    //      is = true;
    //      break;
    //    }
    //  }
    //   if (is === true) {
    //     alert("already  email is exist");
    //   }
    //     // //localStorage.setItem("array",JSON.stringify(arr));
    //     // let get = form_details.find(function (obj) {
    //     // let checkid = obj["num"];
    //     // if (num !== checkid) {
    //     //   alert("notvalid");
    //     // }
        
    //     else {
          
   
        
        
        
    </script>
  </body>
</html>
