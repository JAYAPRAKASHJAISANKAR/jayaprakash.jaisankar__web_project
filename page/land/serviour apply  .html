<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    .whole {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 60px;
      margin-left: 600px;
      background-color: rgb(115, 179, 231);
      width: 200px;
      padding: 60px 120px 60px 120px;
      box-shadow: 5px 8px 16px 4px rgba(78, 137, 185, 0.2);
      border-radius: 10px;
    }

    .card {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    #sub {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #submit {
      border-radius: 10px;
      border: none;
      background-color: rgb(65, 108, 228);
      width: 100px;
      height: 30px;
    }
  </style>
  <body>
    <div class="whole">
      <form id="form">
        <div class="card">
          <label>serviour_name:</label>
          <input id="name" />
        </div>
        <div class="card">
          <label>taluk</label> &emsp;&emsp;&emsp;&emsp;
          <input id="tname" />
        </div>

        <div class="card">
          <label>email</label> &emsp;&emsp;&emsp;&emsp;
          <input id="mail" />
        </div>

        <!-- <div class="card">
          <label>number</label> &emsp;&emsp;&emsp;&emsp;
          <input id="num" />
        </div> -->
        <div id="sub">
          <button onclick="submit" id="submit" class="btn">submit</button>
        </div>
      </form>
    </div>
    <script>
      let form = document.getElementById("form");
      //let mail = JSON.parse(localStorage.getItem("userinfo"));
      form.addEventListener("submit", function (event) {
        event.preventDefault();

        let name = document.getElementById("name").value;
        let tname = document.getElementById("tname").value;
     let mail = document.getElementById("mail").value;
        //   let num = document.getElementById("num").value;

        //  let arr = num.split(",");

        let data = {
          name,
          tname,
          mail,

          // number: arr,
        };
        let card = [];
        card.push(data);
        let uuid = crypto.randomUUID();
        data["uuid"] = uuid;
        console.log(uuid);
        console.log(data);

        card.push(data);

        // let validation = JSON.parse(window.localStorage.getItem("list"));

        // if (validation !== null) {
        //   let is = false;
        //   for (let i = 0; i < validation.length; i++) {
        //     if (tname === validation[i]["tname"]) {
        //       //alert("Email is already in use");
        //       is = true;
        //       break;
        //     }
        //   }
        // }

        // if (is == true) {
        //   alert("taluk name is in use");
        // } else {
        if (window.localStorage.getItem("list") === null) {
          window.localStorage.setItem("list", JSON.stringify(card));
          console.log(window.localStorage.getItem("list"));
          window.location.href = "/page/land/serviour list .html";
        } else {
          let local = window.localStorage.getItem("list");
          let json = JSON.parse(local);
          json.push(data);
          window.localStorage.setItem("list", JSON.stringify(json));
          window.location.href = "/page/land/serviour list .html";
        }
        // }
      });

      // let list = localStorage.setItem("list", JSON.stringify(card));
    </script>
  </body>
</html>
