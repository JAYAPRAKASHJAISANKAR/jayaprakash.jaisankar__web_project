<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .form {
        margin: 40px;
      }
      .whole {
        margin-top: 10%;
        margin-left: 30%;
        margin-right: 30%;
        /* border: 2px solid black; */
      }

      #email {
        margin: 10px;
      }

      #password {
        margin: 10px;
      }
    </style>
  </head>
  <body>
    <div class="whole">
      <form id="form">
        <h1>Login</h1>

        <label>E-mail</label>
        <input type="email" id="email" /><br />

        <label>Password</label>
        <input
          type="password"
          id="password"
          pattern="[^(?:0|\(?\+33\)?\s?|0033\s?)[1-79](?:[\.\-\s]?\d\d){4}$
        ]"
        /><br />
        <button type="submit" class="btn">submit</button>
      </form>
    </div>

    <!-- <form id="emailForm" onsubmit="return checkEmail();">
      <h1>Login</h1>

      <div class="form-group">
        <label>Email</label>
        <input type="email" name="email" class="form-control" />
      </div>

      <input type="submit" value="Next" class="btn btn-primary" />
    </form>

    <form id="passwordForm" onsubmit="return doLogin();" style="display: none">
      <h1>Login</h1>

      <input type="hidden" name="email" id="verifiedEmail" />

      <div class="form-group">
        <label>Password</label>
        <input type="password" name="password" class="form-control" />
      </div>

      <input type="submit" value="Login" class="btn btn-primary" />
    </form> -->

    <script>
      let logIn = document.getElementById("form");
      logIn.addEventListener("submit", (event) => {
        event.preventDefault();
        let log = [];
        let Data = JSON.parse(localStorage.getItem("user"));
        console.log(Data);
        let email = document.getElementById("email").value.toLowerCase();
        let password = document.getElementById("password").value;
        console.log(email, password);

        let isthis = false;
        for (let i = 0; i < Data.length; i++) {
          if (email === Data[i].email && password == Data[i].password) {
            isthis = true;
            log.push(Data[i]);
            window.localStorage.setItem("userinfo", JSON.stringify(log));
            break;
          } else {
            isthis = false;
          }
        }

        if (isthis === true) {
          alert("success");

          window.location.href = "/index.html";
        } else {
          alert("failed");
          window.location.href = "\page\sign-up\sign-up.html";
        }
      });

      // i = i + defaultData.length;

      // let logIn = document.getElementById("form");
      // logIn.addEventListener("submit", (event) => {
      //   event.preventDefault();
      //   let Data = localStorage.getItem("user_info");
      //   let defaultData = JSON.parse(Data);
      //   let email = document.getElementById("email").value;
      //   let Password = document.getElementById("password").value;
      //   for (let i = 0; i < defaultData.length; i++) {
      //     console.log(defaultData[i]);
      //     isthis = false;
      //     if (email === email && Password === password) {
      //       isthis = true;
      //       break;
      //     } else {
      //       isthis = false;
      //     }
      //   }
      //   if ((isthis = true)) {
      //     alert("Success");
      //   } else {
      //     alert("failed");
      //   }
      // });

      // let logIn = document.getElementById("form");
      // logIn.addEventListener("submit", (event) => {
      //   event.preventDefault();
      //   let Data = JSON.parse(localStorage.getItem("user"));
      //   console.log(Data);

      //   let Email = document.getElementById("email").value;
      //   let PWD = document.getElementById("password").value;
      //   // const selectUser = Data.find(function (event) {
      //   //   const email = event["email"];
      //   //   const password = event["password"];
      //   if (Email == email && PWD === password) {
      //     alert("Success");

      //     window.location.href = "/index.html";
      //   } else {
      //     alert("failed");
      //   }
      //   // window.location.href = "\page\sign-up\sign-up.html";
      // });

      // let log = document.getElementById("form");
      // log.addEventListener("submit", (event) => {
      //   event.preventDefault();
      //   let Data = localStorage.getItem("arr");
      //   let arr = JSON.parse(Data);
      //   let email = document.getElementById("email").value;
      //   let Password = document.getElementById("password").value;
      //   for (let i = 0; i < arr.length; i++) {
      //     console.log(arr[i]);
      //     if (email === arr[i].email && Password === arr[i].password) {
      //       return alert("Success");
      //       window.location.href = "/index.html";
      //       // i = i + arr.length;
      //     }
      //   }
      //   return alert("failed");
      // });

      // let log = document.getElementById("form");
      // log.addEventListener("submit", function (event) {
      //   event.preventDefault();
      //   let arr = [];
      //   let email = document.getElementById("email").value;
      //   let password = document.getElementById("password").value;
      //   const check = { email, password };
      //   arr.push(check);
      //   console.log(check);
      //   localStorage.setItem("check", JSON.stringify(arr));
      //   let checker = JSON.parse(localStorage.getItem("userss"));

      //   if (email == checker["email"]) {
      //     window.alert("Login ");
      //     window.location.href = "\index.html";
      //   } else {
      //     window.alert(" Please sign up");
      //     window.location.href = "\page\sign-up\sign-up.html";
      //   }
      // });

      // console.log(checker["email"]);
      // console.log(check["check_name"]);
      // JSON.parse(localStorage.setItem("name_list"));

      //  else if (password === welcom["pass"]) {
      //   window.location.href = "../after-login/index.html";
      // }

      // function sign() {
      //   const email = document.getElementById("email").value;
      //   const password = document.getElementById("password").value;
      //   const login = localStorage.getItem("data");
      //   const log = JSON.parse(login);
      //   console.log(log);

      //   const check = log.find((e) => e.email == email);
      //   console.log(check);
      //   if (check["email"] == email && check["password"] == password) {
      //   } else {
      //     alert("not assigned");
      //   }
      //   window.location.href = "/index.html";
      // }
      // let login = document.getElementById("form");
      // form.addEventListener("submit", function check(event) {
      //   event.preventDefault();
      //   let check = {};
      //   let email = document.getElementById("email").value;
      //   check["email"] = email;
      //   let password = document.getElementById("password").value;
      //   check["password"] = password;
      //   console.log(check);
      //   localStorage.setItem("check", JSON.stringify(check));
      //   if (email === welcome["name"]) {
      //     window.location.href = "/index.html";
      //   } else if (password === welcome["password"]) {
      //     window.location.href = "/index.html";
      //   } else {
      //     window.alert("Not a Member Please sign up");
      //     window.location.href = "./page/sign-up/sign-up.html";
      //   }
      // });
      // function submit() {
      //   const whole = document.querySelector(".whole");
      //   const form = document.querySelector(".form");

      //   whole.addEventListener("mousemove", (e) => {
      //     let horizontal = (window.innerWidth / 2 - e.pageX) / 10;
      //     let vertical = (window.innerHeight / 2 - e.pageX) / 10;
      //   });

      //   window.location.href = "/index.html";
      // }
      // function submit() {
      //   const email = document.getElementById("email").value;

      //   const password = document.getElementById("password").value;

      //   console.log(email);
      //   console.log(password);

      //   localStorage.setItem("user_email", email);
      //   localStorage.setItem("user_password", password);
      //   window.location.href = "/index.html";
      // }

      // for (let key of hash) {
      //   if (key[0] === user_email && key[1] === atob(password)) {
      //     alert("Login successful");
      //   } else {
      //     alert("Login fail");
      //   }
      // }

      // function checkEmail() {
      //   var form = document.getElementById("emailForm");

      //   var ajax = new XMLHttpRequest();
      //   ajax.open("POST", "server.php", true);
      //   ajax.setRequestHeader(
      //     "Content-type",
      //     "application/x-www-form-urlencoded"
      //   );

      //   ajax.onreadystatechange = function () {
      //     if (this.readyState == 4 && this.status == 200) {
      //       var response = JSON.parse(this.responseText);
      //       if (response.status == "success") {
      //         // set value in hidden email field in second form
      //         document.getElementById("verifiedEmail").value = form.email.value;

      //         // hide the first form
      //         form.style.display = "none";

      //         // show second form
      //         document.getElementById("passwordForm").style.display = "";
      //       } else {
      //         alert(response.message);
      //       }
      //     }
      //   };
      //   window.location.href = "/index.html";
      // }
    </script>
  </body>
</html>
