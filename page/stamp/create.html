<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .whole {
        display: flex;
        justify-content: center;
        align-items: center;
      }
      body {
        background-color: rgb(217, 238, 251);
      }
      .change {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px;
        font-size: 18px;
        color: white;
        font-weight: bold;
      }
      #form {
        background-color: rgb(73, 179, 245);
        padding-top: 20px;

        border-radius: 10px;
        box-shadow: 6px 10px 6px rgb(80, 188, 255);
        height: fit-content;
        margin: 10px;
      }
      .bt {
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 18px;
      }
      .btn {
        width: 150px;
        height: 35px;
        border-radius: 10px;
        border: none;
        outline: none;
        /* margin: 0px 0px 0px 60px; */
        background-color: rgb(51, 159, 227);
        font-size: 18px;
        color: white;
        font-weight: bold;
        margin-bottom: 20px;
      }
      .btn:hover {
        background-color: rgb(0, 118, 191);
      }
    </style>
  </head>
  <body>
    <div class="whole">
      <form id="form">
        <div class="change">
          <label>image</label>&emsp;
          <input id="image" type="url" required />
        </div>

        <div class="change">
          <label>price</label>&emsp;
          <input id="price" type="number" required />
        </div>
        <div class="change">
          <label>Stock</label>&emsp;
          <input id="stock" type="number" required />
        </div>
        <div class="change">
          <label>name</label>&emsp;
          <input id="name" type="text" required />
        </div>
        <div class="change">
          <label>description</label>&emsp;
          <input id="description" type="text" required />
        </div>
        <div class="bt">
          <button onclick="submit" id="submit" class="btn">submit</button>
        </div>
      </form>
    </div>
    <script>
      let form = document.getElementById("form");

      form.addEventListener("submit", function (event) {
        event.preventDefault();

        let updates = {};

        let image = document.getElementById("image").value;
        updates["src"] = image;

        let name = document.getElementById("name").value;
        updates["name"] = name;

        let price = document.getElementById("price").value;
        updates["price"] = price;

        let stock = document.getElementById("stock").value;
        updates["stock"] = stock;

        let description = document.getElementById("description").value;
        updates["description"] = description;
        let uuid = crypto.randomUUID();
        updates["uuid"] = uuid;
        console.log(uuid);
        console.log(updates);

        let whole = [];

        whole.push(updates);

        if (window.localStorage.getItem("jscard") === null) {
          window.localStorage.setItem("jscard", JSON.stringify(whole));
          console.log(window.localStorage.getItem("jscard"));
        } else {
          let local = window.localStorage.getItem("jscard");
          let json = JSON.parse(local);
          json.push(updates);
          window.localStorage.setItem("jscard", JSON.stringify(json));
          window.location.href = "./stamp.html";
        }
      });
    </script>
  </body>
</html>
